{"version":3,"sources":["components/GlobalStore.js","components/API.js","components/NavBar.js","components/ProductCard.js","components/ProductListPage.js","components/RatingBar.js","components/ProductReviewForm.js","components/ProductReviews.js","components/ProductInfoPage.js","components/SettingsPage.js","components/ProductAddPage.js","components/ProductCartRow.js","components/CartPage.js","components/RegisterPage.js","components/OAuth.js","components/LoginPage.js","components/LogoutPage.js","components/Footer.js","App.js","index.js"],"names":["GlobalData","React","createContext","dispatcher","state","action","newState","do","cartItemIdx","cart","findIndex","item","id","console","log","type","num","push","messageType","message","loggedIn","data","GlobalStore","props","useReducer","serverStatus","globalData","dispatch","Provider","value","useGlobalStore","useContext","showTimeout","prevLocation","get","url","fetch","headers","localStorage","session","then","result","json","post","userData","method","body","JSON","stringify","NavBar","useState","showMenu","setShowMenu","invalidSession","setInvalidSession","location","useLocation","checkServer","a","API","apiServerStatus","status","error","useEffect","isSessionExisting","length","isUrlNotRequiringLogin","pathname","checkSession","setInterval","clearTimeout","setTimeout","cartTotalQuantity","reduce","total","to","class","className","src","alt","style","width","height","onClick","data-toggle","data-target","aria-controls","aria-expanded","aria-label","thumbnail","name","role","ProductCard","key","heading","image","description","title","price","ProductListPage","products","setProducts","apiProducts","loadProducts","map","product","RatingBar","starsHtml","starCnt","rating","dangerouslySetInnerHTML","__html","ProductReviewForm","for","placeholder","rows","saveForm","ProductReviews","showForm","setShowForm","e","preventDefault","reviews","review","ProductInfoPage","useParams","showProduct","setShowProduct","apiProduct","loadProduct","SettingsPage","ProductAddPage","ProductCartRow","CartPage","RegisterPage","oAuthWindow","email","password","setUserData","isRegistered","setIsRegistered","inputEmail","useRef","inputPassword","handleInputChange","target","trim","test","current","focus","apiResult","rememberMe","onChange","ref","API_URL","window","protocol","host","replace","oAuthPending","OAuth","openOAuth","client","left","innerWidth","top","innerHeight","open","check","closed","undefined","clearInterval","checkPopup","addEventListener","substr","loginData","parse","close","loginComplete","icons","facebook","twitter","google","github","linkedin","providers","provider","marginRight","LoginPage","checked","href","LogoutPage","logoutRequest","Footer","App","exact","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"6OASMA,EAAaC,IAAMC,gBAEzB,SAASC,EAAWC,EAAMC,GACtB,IAAIC,EAAQ,eAAOF,GACnB,OAAQC,EAAOE,IAEX,IAAK,YAED,IAAMC,EAAcF,EAASG,KAAKC,WAAW,SAAAC,GAAI,OAAEA,EAAKC,KAAKP,EAAOO,MAQpE,OAPIJ,GAAa,GACbK,QAAQC,IAAR,sBAA4BT,EAAOU,KAAnC,sBAAqDT,EAASG,KAAKD,GAAaQ,IAAhF,iBAA4FX,EAAOW,IAAnG,MACAV,EAASG,KAAKD,GAAaQ,KAAOX,EAAOW,KAEzCV,EAASG,KAAKQ,KAAd,eAAyBZ,IAE7BQ,QAAQC,IAAR,qCAA2CT,EAAOO,GAAlD,yBAAqEJ,EAArE,KAAqFF,GAC9EA,EAEX,IAAK,aAID,OAHAA,EAASY,YAAcb,EAAOU,KAC9BT,EAASa,QAAUd,EAAOc,QAC1BN,QAAQC,IAAR,oDAA0DT,EAAOc,UAC1Db,EAEX,IAAK,eAED,OADAA,EAASY,YAAc,GAAIZ,EAASa,QAAU,GACvCb,EAEX,IAAK,aAED,OADAA,EAASc,SAAWf,EAAOe,SACpBd,EAEX,IAAK,cAED,OADAA,EAAQ,eAAOA,EAAP,GAAoBD,EAAOgB,MAGvC,QACIR,QAAQC,IAAR,4CAAkDT,EAAOE,MAKrE,SAASe,EAAaC,GAAQ,IAAD,EACOC,qBAAYrB,EACxC,CAAEe,YAAa,GAAIC,QAAS,GAAIM,aAAc,GAAIL,UAAU,EAAMX,KAAM,KAFnD,mBACjBiB,EADiB,KACLC,EADK,KAIzB,OACI,kBAAC3B,EAAW4B,SAAZ,eAAqBC,MAAO,CAAEH,EAAYC,IAAgBJ,IAIlE,SAASO,IACL,OAAOC,qBAAW/B,G,2BC1CP,ICbXgC,EACAC,EDYW,GACXC,IAnBJ,SAAcC,GACV,OAAOC,MAAOD,EACV,CAAEE,QAAS,CAAE,QAAWC,aAAaC,QAAUD,aAAaC,QAAU,MACrEC,MAAM,SAAAC,GAAM,OAAEA,EAAOC,WAiB1BC,KAdJ,SAAeR,EAAKS,GAChB,OAAOR,MAAOD,EACV,CAAIU,OAAQ,OACRR,QAAS,CACL,OAAU,oCACV,eAAgB,mBAChB,QAAWC,aAAaC,QAAUD,aAAaC,QAAU,IAE7DO,KAAMC,KAAKC,UAAUJ,KACtBJ,MAAM,SAAAC,GAAM,OAAEA,EAAOC,YC0HjBO,MAhIf,WAAmB,IAAD,EACkBC,oBAAU,GAD5B,mBACRC,EADQ,KACEC,EADF,OAE8BF,oBAAU,GAFxC,mBAERG,EAFQ,KAEQC,EAFR,OAGiBxB,IAHjB,mBAGRJ,EAHQ,KAGIC,EAHJ,KAKV4B,EAAWC,cALD,SAkBDC,IAlBC,2EAkBhB,4BAAAC,EAAA,+EAEkCC,EAAIzB,IAAJ,kBAFlC,OAGiC,aADvB0B,EAFV,QAGwBC,OAGc,YAA5BnC,EAAWD,cACbE,EAAU,CAAEpB,GAAI,kBAGlBoB,EAAU,CAAEpB,GAAI,aAAcQ,KAAM,SAAUI,QAASyC,EAAgBE,QACvEjD,QAAQC,IAAR,uDAXN,gDAcIa,EAAU,CAAEpB,GAAI,aAAcQ,KAAM,SAAUI,QAAQ,mBAd1D,0DAlBgB,sBAqChB4C,qBAAW,YA3BX,WAEE,IAAMC,EAAoB1B,aAAaC,SAAyC,KAA9BD,aAAaC,QAAQ0B,OACjEC,EAA6C,WAApBX,EAASY,UAA2C,cAApBZ,EAASY,SACxEtD,QAAQC,IAAR,qCAA2CkD,EAA3C,oCAAwFE,EAAxF,eAAqHF,IAAsBE,IAC3IZ,GAAoBU,IAAsBE,GAuB1CE,GAGAC,YAAaZ,EAAa,MAC1BA,MACC,IAECN,IAEFmB,aAActC,GACdA,EAAcuC,YAAY,WAAYnB,GAAa,KAAY,MAI7DnB,IAAesB,EAASY,WAC1BtD,QAAQC,IAAR,wCACAwD,aAActC,GACdA,EAAcuC,YAAY,WAAYnB,GAAa,KAAY,KAE/DnB,EAAesB,EAASY,UAG1B,IAAMK,EAAqB9C,GAAcA,EAAWjB,KAAOiB,EAAWjB,KAAKgE,QAAQ,SAACC,EAAM/D,GAAP,OAAgB+D,EAAM/D,EAAKK,MAAK,GAAM,EAEzH,OACE,oCACEqC,EAAiB,kBAAC,IAAD,CAAUsB,GAAG,WAAc,GAC9C,yBAAKC,MAAM,iDACT,kBAAC,IAAD,CAAMD,GAAG,IAAIE,UAAU,gBACnB,yBAAKC,IAAI,2FAA2FC,IAAI,GAAGC,MA5DzG,CAAEC,MAAO,OAAQC,OAAQ,WA+D/B,4BAAQC,QAAS,kBAAM/B,GAAaD,IAAWyB,MAAM,iBAAiB7D,KAAK,SAASqE,cAAY,WAAWC,cAAY,0BAA0BC,gBAAc,yBAAyBC,gBAAc,QAAQC,aAAW,qBACvN,0BAAMZ,MAAM,yBAGd,yBAAKC,UAAW,6BAA6B1B,EAAW,OAAS,IAAKvC,GAAG,0BACvE,wBAAIgE,MAAM,sBACR,wBAAIC,UAAU,YACZ,kBAAC,IAAD,CAAMF,GAAG,eAAeE,UAAiC,iBAAtBtB,EAASY,SAA8B,kBAAoB,YAA9F,iBAIF,wBAAIU,UAAU,YACZ,kBAAC,IAAD,CAAMF,GAAG,cAAcE,UAAiC,gBAAtBtB,EAASY,SAA6B,kBAAoB,YAA5F,gBAIF,wBAAIU,UAAU,YACZ,kBAAC,IAAD,CAAMF,GAAG,YAAYE,UAAiC,cAAtBtB,EAASY,SAA2B,kBAAoB,YAAxF,aAIF,wBAAIU,UAAU,YACZ,kBAAC,IAAD,CAAMF,GAAG,QAAQE,UAAiC,UAAtBtB,EAASY,SAAuB,kBAAoB,YAC5EK,EACE,0BAAMI,MAAM,kCAAiC,uBAAGA,MAAM,yBAAtD,IAAmFJ,GACnF,KAINlC,aAAaC,QACb,wBAAIsC,UAAU,YACZ,kBAAC,IAAD,CAAMF,GAAG,UAAUE,UAAU,YAA7B,WAKF,wBAAIA,UAAU,YACZ,kBAAC,IAAD,CAAMF,GAAG,SAASE,UAAU,YAA5B,aASV,yBAAKD,MAAM,aAET,yBAAKA,MAAM,WAAYlD,EAAW+D,UAAY,yBAAKX,IAAKpD,EAAW+D,UAAW7E,GAAG,iBAAoB,GAArG,YAAmHc,EAAWgE,MAE9H,yBAAKb,UAAYnD,EAAWR,YAAX,sBAAwCQ,EAAWR,aAAgB,SAAWyE,KAAK,SAC/FjE,EAAWP,YClHPyE,MAdf,SAAsBrE,GAClB,OACI,yBAAKsE,IAAKtE,EAAMuE,QAASjB,UAAU,sBAC/B,kBAAC,IAAD,CAAMF,GAAI,gBAAgBpD,EAAMX,IAChC,yBAAKiE,UAAU,eAAeC,IAAKvD,EAAMwE,MAAOhB,IAAKxD,EAAMyE,YAAaC,MAAO1E,EAAMyE,cACrF,yBAAKnB,UAAU,aACX,wBAAIA,UAAU,cAActD,EAAMuE,SAClC,uBAAGjB,UAAU,aAAatD,EAAM2E,WCsBjCC,MA3Bf,SAA0B5E,GAAQ,IAAD,EACIO,IADJ,mBACTH,GADS,aAEIuB,mBAAS,IAFb,mBAErBkD,EAFqB,KAEXC,EAFW,iDAS7B,4BAAA3C,EAAA,sEAC8BC,EAAIzB,IAAI,qBADtC,YACUoE,EADV,QAGoBxC,MAHpB,uBAIQnC,EAAU,CAAEpB,GAAI,aAAcQ,KAAM,SAAUI,QAASmF,EAAYxC,QAJ3E,0BAQIuC,EAAaC,GARjB,4CAT6B,sBAoB7B,OAfAvC,qBAAW,YALkB,mCAMzBwC,KACD,IAcC,yBAAK3B,MAAM,OACVwB,EAASI,KAAK,SAAAC,GAAO,OAAE,kBAAC,EAAgBA,QCblCC,MAZf,SAAoBnF,GAEhB,IADA,IAAIoF,EAAY,GACPC,EAAQ,EAAGA,GAAS,EAAGA,IAC5BD,GAAepF,EAAMsF,QAAUD,EACzB,2CACA,8BAEV,OACI,yBAAKE,wBAAyB,CAAEC,OAAQJ,MCkBjCK,MA1Bf,SAA4BzF,GACxB,OACI,8BACI,yBAAKqD,MAAM,cACP,2BAAOqC,IAAI,YAAX,SACA,2BAAOlG,KAAK,QAAQ6D,MAAM,eAAehE,GAAG,WAAWsG,YAAY,sBAEvE,yBAAKtC,MAAM,cACP,2BAAOqC,IAAI,cAAX,aACA,4BAAQrC,MAAM,eAAehE,GAAG,cAChC,qCACA,qCACA,qCACA,qCACA,uCAGJ,yBAAKgE,MAAM,cACP,2BAAOqC,IAAI,cAAX,eACA,8BAAUrC,MAAM,eAAehE,GAAG,aAAauG,KAAK,OAExD,4BAAQvC,MAAM,yBAAyBO,QAAS5D,EAAM6F,UAAtD,iBCWGC,MA9Bf,SAAyB9F,GAAQ,IAAD,EACK2B,oBAAS,GADd,mBACpBoE,EADoB,KACVC,EADU,KAU5B,OARA1G,QAAQC,IAAR,6BAA0CwG,GAQjC,oCACL,6BACEA,EAAW,kBAAC,EAAD,CAAmBF,SARpC,SAAmBI,GACfA,EAAEC,iBAEFF,GAAY,MAMR,yBAAK3C,MAAM,8BACP,4BAAQA,MAAM,2BAA2BO,QAAS,WAAYoC,GAAY,KACtE,uBAAG3C,MAAM,sBADb,YAGR,wBAAIA,MAAM,cACRrD,EAAMmG,QAAUnG,EAAMmG,QAAQlB,KAAK,SAAAmB,GAAM,OAAE,wBAAI/C,MAAM,mBACnD,yBAAKA,MAAM,OACP,yBAAKA,MAAM,SAAQ,2BAAI+C,EAAOjC,OAC9B,yBAAKd,MAAM,oBAAmB,kBAAC,EAAD,CAAWiC,OAAQc,EAAOd,WAE3Dc,EAAOA,WACC,6BC4BNC,MAhDf,SAA0BrG,GAAQ,IACtBX,EAAOiH,cAAPjH,GADqB,EAEUsC,mBAAS,IAFnB,mBAErB4E,EAFqB,KAERC,EAFQ,OAGIjG,IAHJ,mBAGTH,GAHS,uDAU7B,WAA4Bf,GAA5B,eAAA8C,EAAA,sEAC6BC,EAAIzB,IAAJ,uBAAwBtB,IADrD,YACUoH,EADV,QAGmBlE,MAHnB,uBAIQnC,EAAU,CAAEpB,GAAI,aAAcQ,KAAM,SAAUI,QAAS6G,EAAWlE,QAJ1E,0BAOIiE,EAAgBC,GAPpB,4CAV6B,sBAyB7B,OAnBAjE,qBAAW,YANkB,oCAOzBkE,CAAarH,KACd,IAkBC,yBAAKgE,MAAM,aACP,yBAAKA,MAAM,OACP,yBAAKA,MAAM,SACP,yBAAKE,IAAKgD,EAAY/B,MAAOnB,MAAM,mBAEvC,yBAAKA,MAAM,SACP,4BAAKkD,EAAYhC,SACjB,4BAAKgC,EAAY5B,OAEjB,4BAAI,kBAAC,EAAD,CAAWW,OAAQiB,EAAYjB,UAGnC,4BAAQ1B,QAlBxB,WACIxD,EAAS,aACLZ,KAAM,YAAaH,KAAII,IAAK,GAAM8G,KAgBElD,MAAM,0BAAyB,uBAAGA,MAAM,uBAGvEkD,EAAY9B,aAEjB,kBAAC,EAAD,CAAgBpF,GAAIkH,EAAYlH,GAAI8G,QAASI,EAAYJ,YC3CtDQ,MANf,SAAuB3G,GACnB,OACI,uDCKO4G,MANf,SAAyB5G,GACrB,OACI,+CCeO6G,MAjBf,SAAyB7G,GAKrB,OACI,wBAAIqD,MAAM,qEACN,kBAAC,IAAD,CAAMD,GAAI,gBAAgBpD,EAAMX,IAC5B,yBAAKgE,MAAM,gBAAgBE,IAAKvD,EAAMwE,MAAOf,MAP3C,CACVC,MAAO,OAAQC,OAAQ,UAOd3D,EAAMuE,SAGX,0BAAMlB,MAAM,+CAA+CrD,EAAMP,OCD9DqH,MAVf,SAAmB9G,GAAQ,IAAD,EACWO,IADX,mBACdJ,EADc,KAGtB,OAHsB,KAIlB,wBAAImE,IAAKtE,EAAMuE,QAASlB,MAAM,cAC7BlD,EAAWjB,KAAK+F,KAAK,SAAAC,GAAO,OAAE,kBAAC,EAAmBA,Q,QC2F5C6B,ICjGXC,EDiGWD,EA/Ff,WAAuB,MAEcxG,IAFd,mBAECH,GAFD,aAGeuB,mBAAS,CAAEwC,KAAM,GAAI8C,MAAO,GAAIC,SAAU,KAHzD,mBAGX7F,EAHW,KAGD8F,EAHC,OAIuBxF,oBAAU,GAJjC,mBAIXyF,EAJW,KAIGC,EAJH,KAMbC,EAAaC,mBACbC,EAAgBD,mBAEtB,SAASE,EAAmBxB,GAAI,IAAD,EACLA,EAAEyB,OAAhBrI,EADmB,EACnBA,GAAIiB,EADe,EACfA,MAEZ6G,EAAY,eAAM9F,EAAP,eAAkBhC,EAAKiB,KAZnB,4CAenB,WAA6B2F,GAA7B,eAAA9D,EAAA,yDACI8D,EAAEC,iBAE4B,KAA1B7E,EAAS4F,MAAMU,QACb,gDAAgDC,KAAKvG,EAAS4F,OAJxE,uBAKQK,EAAWO,QAAQC,QACnB1H,EAAU,CAAEpB,GAAI,aAAcQ,KAAM,SAAUI,QAAS,iCAN/D,6BAUqC,KAA7ByB,EAAS6F,SAASS,OAV1B,uBAWQH,EAAcK,QAAQC,QACtB1H,EAAU,CAAEpB,GAAI,aAAcQ,KAAM,SAAUI,QAAS,8BAZ/D,+BAgBQyB,EAAS6F,SAASS,OAAOjF,OAAS,GAhB1C,wBAiBQ8E,EAAcK,QAAQC,QACtB1H,EAAU,CAAEpB,GAAI,aAAcQ,KAAM,SAAUI,QAAS,yDAlB/D,4CAsB4BwC,EAAIhB,KAAK,qBAAsBC,GAtB3D,aAsBU0G,EAtBV,QAwBkBxF,MAxBlB,wBAyBQnC,EAAU,CAAEpB,GAAI,aAAcQ,KAAM,SAAUI,QAASmI,EAAUxF,QAzBzE,2BA8BIxB,aAAakG,MAAQc,EAAUC,WAAaD,EAAUd,MAAQ,GAE9D7G,EAAU,CAAEpB,GAAI,aAAcQ,KAAM,UAAWI,QAAS,sCAGxDoD,YAAY,WAAYqE,GAAgB,KAAU,KAnCtD,6CAfmB,sBAqDnB,OACI,6BACMD,EAAe,kBAAC,IAAD,CAAUhE,GAAG,WAAc,GAE5C,yBAAKC,MAAM,aACP,iDACA,yBAAKA,MAAM,QACP,yBAAKA,MAAM,eAAX,YAGA,yBAAKA,MAAM,aACX,0BAAMe,KAAK,QACP,2BAAO5E,KAAK,SAASH,GAAG,QAAQiB,MAAM,KACtC,yBAAK+C,MAAM,cACP,2BAAOqC,IAAI,QAAX,cACA,2BAAOpF,MAAOe,EAAS8C,KAAM8D,SAAUR,EAAmBpI,GAAG,OAAOG,KAAK,OAAO6D,MAAM,kBAE1F,yBAAKA,MAAM,cACP,2BAAOqC,IAAI,SAAX,iBACA,2BACIpF,MAAOe,EAAS4F,MAChBgB,SAAUR,EACVS,IAAKZ,EACLjI,GAAG,QAAQG,KAAK,QAAQ6D,MAAM,kBAEtC,yBAAKA,MAAM,cACP,2BAAOqC,IAAI,gBAAX,YACA,2BACIpF,MAAOe,EAAS6F,SAChBe,SAAUR,EACVS,IAAKV,EACLnI,GAAG,WAAWG,KAAK,WAAW6D,MAAM,kBAE5C,4BAAQO,QAtFT,4CAsFgCP,MAAM,0BAArC,kBC1FlB8E,EAAUC,OAAOpG,SAASqG,SAAS,KAAKD,OAAOpG,SAASsG,KAAKC,QAAQ,iBAAiB,kBAGxFC,GAAe,EAuEJC,MArEf,SAAgBzI,GAqBZ,SAAS0I,EAAWC,GAChB,IAAIH,EAAJ,CAGA,IACMI,EAAQR,OAAOS,WAAa,EAAMnF,IAClCoF,EAAOV,OAAOW,YAAc,EAAMpF,IAClC/C,EAAG,UAAMuH,EAAN,kBAAuBQ,GAChCrJ,QAAQC,IAAR,mCAAyCqB,IACzCoG,EAAeoB,OAAOY,KAAKpI,EAAK,GAAjB,yIALD,IAKC,gCALa,IAKb,iBAGWkI,EAHX,kBAGwBF,IAEvCJ,GAAe,EAKnB,WACI,IAAMS,EAAQnG,aAAY,WACnBkE,IAAeA,EAAYkC,aAAiCC,IAAvBnC,EAAYkC,SACpDE,cAAcH,GACdT,GAAe,KAEhB,KATHa,IApCJ7G,qBAAW,WAEP4F,OAAOkB,iBAAiB,WAAW,SAASrD,GAExC,GAAMA,GAAKA,EAAEnG,MAAyB,kBAAVmG,EAAEnG,MAAyC,MAArBmG,EAAEnG,KAAKyJ,OAAO,EAAE,IAAkC,MAAtBtD,EAAEnG,KAAKyJ,QAAQ,EAAE,GAA/F,CAGA,IAAMC,EAAYhI,KAAKiI,MAAMxD,EAAEnG,MAC/BR,QAAQC,IAAR,kCAA+CiK,GAC3CxC,GAAcA,EAAY0C,QAE1B1J,EAAM2J,eAAgB3J,EAAM2J,cAAcH,OAC9C,KACL,IAkCH,IAAMI,EAAQ,CACVC,SAAU,qBACVC,QAAS,oBACTC,OAAQ,wBACRC,OAAQ,mBACRC,SAAU,eAEd,OACI,yBAAK5G,MAAM,QACP,yBAAKA,MAAM,2CACNrD,EAAMkK,UAAUjF,KAAK,SAAAkF,GAAQ,OAE1B,4BAAQvG,QAAS,kBAAI8E,EAAUyB,IAAW9G,MAAM,0BAA0BI,MAAO,CAAC2G,YAAY,SAC1F,uBAAG9G,UAAS,cAASsG,EAAMO,GAAf,mBC0CrBE,MAvGf,WAAoB,MAEkB1I,mBAAS,CAAEwC,KAAM,GAAI8C,MAAOlG,aAAakG,MAAOC,SAAU,GAAIc,YAAY,IAF5F,mBAER3G,EAFQ,KAEE8F,EAFF,OAGiB5G,IAHjB,mBAGRJ,EAHQ,KAGIC,EAHJ,KAKVkH,EAAaC,mBACbC,EAAgBD,mBAEtB,SAASE,EAAmBxB,GAAI,IAAD,EACLA,EAAEyB,OAAhBrI,EADmB,EACnBA,GAAIiB,EADe,EACfA,MAEZ6G,EAAY,eAAM9F,EAAP,eAAkBhC,EAAKiB,KAOtC,SAASqJ,EAAeH,GACpBpJ,EAAU,CAAEpB,GAAI,aAAcQ,KAAM,UAAWI,QAAS4J,EAAU5J,iBAC3D4J,EAAU5J,QAGjBmB,aAAaC,QAAUwI,EAAUxI,QAGjCZ,EAAU,CAAEpB,GAAI,cAAec,KAAM0J,IAErCxG,YAAY,WACR5C,EAAU,CAAEpB,GAAI,iBAChBoB,EAAU,CAAEpB,GAAI,aAAca,UAAU,MACrC,KA/BK,4CAkChB,WAA0BoG,GAA1B,eAAA9D,EAAA,yDACI8D,EAAEC,iBAEqB,KAAnB7E,EAAS4F,MAHjB,uBAIQK,EAAWQ,QACX1H,EAAU,CAAEpB,GAAI,aAAcQ,KAAM,SAAUI,QAAS,6BAL/D,+BAS8B,KAAtByB,EAAS6F,UAAmB7F,EAAS6F,SAASxE,OAAS,GAT/D,uBAUQ8E,EAAcK,QAAQC,QACtB1H,EAAU,CAAEpB,GAAI,aAAcQ,KAAM,SAAUI,QAAS,gCAX/D,2CAe4BwC,EAAIhB,KAAM,kBAAmBC,GAfzD,aAeU0G,EAfV,QAiBkBxF,MAjBlB,wBAkBQnC,EAAU,CAAEpB,GAAI,aAAcQ,KAAM,SAAUI,QAASmI,EAAUxF,QAEjExB,aAAaC,QAAU,GApB/B,2BAwBI2I,EAAe5B,GAxBnB,6CAlCgB,sBA6DhB,OACI,6BACM5H,EAAWN,SAAW,kBAAC,IAAD,CAAUuD,GAAG,iBAAoB,GAEzD,6BACA,qCAEA,yBAAKC,MAAM,aACP,kBAAC,EAAD,CAAO6G,UAAW,CAAC,UAAU,WAAW,SAAS,SAAS,YAAaP,cAAeA,IACtF,yBAAKtG,MAAM,QACP,yBAAKA,MAAM,aACX,0BAAMe,KAAK,QACP,yBAAKf,MAAM,cACP,2BAAOqC,IAAI,aAAX,iBACA,2BACIpF,MAAOe,EAAS4F,MAChBgB,SAAUR,EACVS,IAAKZ,EACLjI,GAAG,QAAQG,KAAK,QAAQ6D,MAAM,kBAEtC,yBAAKA,MAAM,cACP,2BAAOqC,IAAI,gBAAX,YACA,2BACIpF,MAAOe,EAAS6F,SAChBe,SAAUR,EACVS,IAAKV,EACLnI,GAAG,WAAWG,KAAK,WAAW6D,MAAM,kBAE5C,4BAAQO,QAzFZ,4CAyFgCpE,KAAK,SAAS6D,MAAM,0BAAhD,SAjBJ,OAmBI,2BAAO7D,KAAK,WACZ8K,QAASjJ,EAAS2G,WAAYC,SA9ElD,WACId,EAAY,eAAM9F,EAAP,CAAiB2G,YAAa3G,EAAS2G,iBA8ElC,2BAAO3E,MAAM,iBAAiBqC,IAAI,cAAlC,eArBJ,QAsBI,uBAAG6E,KAAK,aAAR,2BCjDTC,MA9Cf,WAAsB,IAAD,EACgBjK,IADhB,mBACTJ,EADS,KACGC,EADH,iDAUjB,4BAAA+B,EAAA,6DACI7C,QAAQC,IAAR,2CADJ,SAE4B6C,EAAIhB,KAAM,mBAAoB,IAF1D,UAEU2G,EAFV,OAIIzI,QAAQC,IAAR,cAA4BwI,IAGxBA,EAAUxF,MAPlB,uBAQQnC,EAAU,CAAEpB,GAAI,aAAcQ,KAAM,SAAUI,QAASmI,EAAUxF,QARzE,0BAYInC,EAAU,CAAEpB,GAAI,aAAcQ,KAAM,UAAWI,QAAS,kBAGxDmB,aAAaC,QAAU,GAEvBgC,YAAY,WACJ5C,EAAU,CAAEpB,GAAI,aAAca,UAAU,MACzC,KAnBX,6CAViB,sBAiCjB,OA9BA2C,qBAAW,YAHM,mCAKbiI,KACG,IA4BH,6BACMtK,EAAWN,SAAW,GAAK,kBAAC,IAAD,CAAUuD,GAAG,WAD9C,iBAGK,6BAASC,MAAM,yBAChB,yBAAKA,MAAM,aACP,uBAAGA,MAAM,mBAAT,mCCjCDqH,MATf,SAAiB1K,GACb,OACI,oCACI,yBAAKX,GAAG,mBACR,yBAAKA,GAAG,UAAR,+BCiCGsL,MAxBf,WACE,OACE,kBAAC,IAAD,KACE,kBAAC5K,EAAD,SACA,yBAAKuD,UAAU,OACX,kBAAC,EAAD,MACA,yBAAKD,MAAM,aACT,kBAAC,IAAD,CAAOuH,OAAK,EAACC,KAAM,CAAC,IAAI,gBAAiBC,UAAWlG,IACpD,kBAAC,IAAD,CAAOiG,KAAK,mBAAmBC,UAAWzE,IAC1C,kBAAC,IAAD,CAAOuE,OAAK,EAACC,KAAK,cAAcC,UAAWlE,IAC3C,kBAAC,IAAD,CAAOgE,OAAK,EAACC,KAAK,QAAQC,UAAWhE,IACrC,kBAAC,IAAD,CAAO8D,OAAK,EAACC,KAAK,YAAYC,UAAW/D,IACzC,kBAAC,IAAD,CAAO6D,OAAK,EAACC,KAAK,SAASC,UAAWT,IACtC,kBAAC,IAAD,CAAOO,OAAK,EAACC,KAAK,UAAUC,UAAWN,IACvC,kBAAC,IAAD,CAAOI,OAAK,EAACC,KAAK,YAAYC,UAAWnE,KAG3C,kBAAC,EAAD,UC3BVoE,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.5835c30c.chunk.js","sourcesContent":["import React, { useContext, useReducer } from \"react\";\n\n/*\n{\n    cart: [ { id, num, price }]\n}\n\n\n*/\nconst GlobalData = React.createContext();\n\nfunction dispatcher(state,action){\n    let newState = {...state};\n    switch( action.do ){\n        /* { type: \"addToCart\", id: [product-id], num: [# product], price} */\n        case 'addToCart':\n            // check if item already exists in the cart\n            const cartItemIdx = newState.cart.findIndex( item=>item.id===action.id );\n            if( cartItemIdx>-1 ){\n                console.log( `[dispatcher:${action.type}] cart.num(${newState.cart[cartItemIdx].num}) += (${action.num})` );\n                newState.cart[cartItemIdx].num += action.num;\n            } else {\n                newState.cart.push( { ...action } );\n            }\n            console.log( `[GlobalStore:addToCart] id(${action.id}) cartItemIdx(${cartItemIdx})`, newState );\n            return newState;\n\n        case 'setMessage':\n            newState.messageType = action.type;\n            newState.message = action.message;\n            console.log( `[GlobalStore:setMessage] set our message: ${action.message}` );\n            return newState;\n        \n        case 'clearMessage':\n            newState.messageType = ''; newState.message = '';\n            return newState;\n\n        case 'loginState':\n            newState.loggedIn = action.loggedIn;\n            return newState;\n\n        case 'setUserData':\n            newState = {...newState, ...action.data };\n            return newState;\n\n        default:\n            console.log( `[ERROR] Sorry, unknown do-action: ${action.do}` );\n        break;\n    }\n}\n\nfunction GlobalStore( props ){\n    const [ globalData, dispatch ]= useReducer( dispatcher, \n        { messageType: '', message: '', serverStatus: '', loggedIn: false,cart: [] } );\n    \n    return (\n        <GlobalData.Provider value={[ globalData, dispatch ]} {...props} />\n    )\n}\n\nfunction useGlobalStore(){\n    return useContext(GlobalData);\n}\n\nexport { GlobalStore, useGlobalStore };","// simple wrapper around fetch to give session & do the JSON after \nfunction get( url ){\n    return fetch( url, \n        { headers: { 'Session': localStorage.session ? localStorage.session : '' } })\n        .then( result=>result.json() );\n}\n\nfunction post( url, userData ){\n    return fetch( url, \n        {   method: 'post',\n            headers: {\n                'Accept': 'application/json, text/plain, */*',\n                'Content-Type': 'application/json',\n                'Session': localStorage.session ? localStorage.session : ''\n            },\n            body: JSON.stringify(userData)\n        }).then( result=>result.json());\n}\n\nexport default {\n    get,\n    post\n};","import React, { useState, useEffect } from 'react';\nimport { Link, useLocation } from \"react-router-dom\";\nimport { useGlobalStore } from \"./GlobalStore\";\nimport { Redirect } from 'react-router-dom';\nimport API from \"./API\";\n\nlet showTimeout,serverInterval;\nlet prevLocation;\n\n/* activePage  | changePage-call-back */\nfunction NavBar() {\n  const [ showMenu, setShowMenu ] = useState( false );\n  const [ invalidSession, setInvalidSession ] = useState( false );\n  const [ globalData, dispatch ] = useGlobalStore();\n\n  const location = useLocation();\n  const style = {\n      logo: { width: '64px', height: '64px' }\n  }\n\n  function checkSession(){\n    // force redirection if no session & yet not login/reg pages\n    const isSessionExisting = localStorage.session && localStorage.session.length===36;\n    const isUrlNotRequiringLogin = location.pathname==='/login' || location.pathname==='/register';\n    console.log( `[Navbar] isSessionExisting(${isSessionExisting}) isUrlNotRequiringLogin(${isUrlNotRequiringLogin}): ${!isSessionExisting && !isUrlNotRequiringLogin}` );\n    setInvalidSession( !isSessionExisting && !isUrlNotRequiringLogin );\n  }\n\n  async function checkServer(){\n    try {\n      const apiServerStatus = await API.get(`/server-status`)\n      if( apiServerStatus.status==='running' ){\n        // if server status was not good before, then we probably have a message of this\n        // so clear it.\n        if( globalData.serverStatus !== 'running')\n          dispatch( { do: 'clearMessage' } );\n\n      } else {\n        dispatch( { do: 'setMessage', type: 'danger', message: apiServerStatus.error } );\n        console.log( `[App] Crap server is not running, show an error...` );\n      }\n    } catch( e ){\n      dispatch( { do: 'setMessage', type: 'danger', message: `Server down...` } );\n    }\n  }\n\n\n  useEffect( function(){\n    checkSession();\n\n    // and do a periodic check on the server, indicating a problem if server is down\n    setInterval( checkServer, 15000 );\n    checkServer();\n  }, [] );\n\n  if( showMenu ){\n    // hide the nav after 10s\n    clearTimeout( showTimeout );\n    showTimeout = setTimeout( function(){ setShowMenu( false ); }, 2000 );\n  }\n\n  // if we change locations, hide menu immediately\n  if( prevLocation!==location.pathname ){\n    console.log( `**** > location changed, hiding menu`)\n    clearTimeout( showTimeout );\n    showTimeout = setTimeout( function(){ setShowMenu( false ); }, 100 );\n    // setShowMenu( false );\n    prevLocation = location.pathname;\n  }\n\n  const cartTotalQuantity =( globalData && globalData.cart ? globalData.cart.reduce( (total,item) => total+item.num, 0 ) : 0 );\n\n  return ( \n    <>\n    { invalidSession ? <Redirect to='/login' /> : '' }\n    <nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n      <Link to=\"/\" className=\"navbar-brand\">\n          <img src='https://upload.wikimedia.org/wikipedia/commons/7/79/Mountain_icon_%28Noun_Project%29.svg' alt=\"\" style={style.logo} />\n      </Link>\n      {/* <a class=\"navbar-brand\" href=\"#\" onClick={ function(){ props.changePage('AboutPage')} }>Pupster</a> */}\n      <button onClick={() => setShowMenu(!showMenu)} class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n        <span class=\"navbar-toggler-icon\"></span>\n      </button>\n\n      <div className={`collapse navbar-collapse `+(showMenu ? 'show' : '')} id=\"navbarSupportedContent\">\n        <ul class=\"navbar-nav mr-auto\">\n          <li className=\"nav-item\">\n            <Link to=\"/productlist\" className={location.pathname === \"/productlist\" ? \"nav-link active\" : \"nav-link\"}>\n              Product List\n            </Link>\n          </li>          \n          <li className=\"nav-item\">\n            <Link to=\"/productadd\" className={location.pathname === \"/productadd\" ? \"nav-link active\" : \"nav-link\"}>\n              Product Add\n            </Link>\n          </li> \n          <li className=\"nav-item\">\n            <Link to=\"/settings\" className={location.pathname === \"/settings\" ? \"nav-link active\" : \"nav-link\"}>\n              Settings\n            </Link>\n          </li>\n          <li className=\"nav-item\">\n            <Link to=\"/cart\" className={location.pathname === \"/cart\" ? \"nav-link active\" : \"nav-link\"}>\n              { cartTotalQuantity \n                ? <span class=\"badge badge-pill badge-success\"><i class=\"fas fa-shopping-cart\"></i> {cartTotalQuantity}</span>\n                : ''\n              }\n            </Link>\n          </li>          \n          { localStorage.session ? \n            <li className=\"nav-item\">\n              <Link to=\"/logout\" className=\"nav-link\">\n                Logout\n              </Link>\n            </li> \n            :\n            <li className=\"nav-item\">\n              <Link to=\"/login\" className=\"nav-link\">\n                Login\n              </Link>\n            </li>\n          }       \n        </ul>\n      </div>\n    </nav>\n\n    <div class='container'>\n      {/* show user session info */}\n      <div class='d-block'>{ globalData.thumbnail ? <img src={globalData.thumbnail} id='navThumbnail' /> : '' } Welcome {globalData.name}</div>\n      {/* show a global message bar below the nav */}\n      <div className={ globalData.messageType ? `alert alert-${globalData.messageType}` : 'd-hide' } role=\"alert\">\n          {globalData.message}\n      </div>\n    </div>      \n    </>\n  );\n}\n\nexport default NavBar;","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction ProductCard( props ){\n    return (\n        <div key={props.heading} className=\"card mx-auto col-4\">\n            <Link to={'/productinfo/'+props.id}>\n            <img className=\"card-img-top\" src={props.image} alt={props.description} title={props.description} />\n            <div className=\"card-body\">\n                <h4 className=\"card-title\">{props.heading}</h4>\n                <p className=\"card-text\">{props.price}</p>\n            </div>\n            </Link>\n        </div>\n    )\n}\n\nexport default ProductCard;","import React, { useState, useEffect } from \"react\";\nimport ProductCard from \"./ProductCard\";\nimport { useGlobalStore } from \"./GlobalStore\";\nimport API from \"./API\";\n\nfunction ProductListPage( props ){\n    const [ globalData, dispatch ] = useGlobalStore();\n    const [ products, setProducts ]= useState([]);\n    \n    // load only ONCE at component load\n    useEffect( function(){\n        loadProducts();\n    }, [] );\n\n    async function loadProducts(){\n        const apiProducts = await API.get('/api/product/list');\n        \n        if( apiProducts.error ){\n            dispatch( { do: 'setMessage', type: 'danger', message: apiProducts.error } );\n            return;\n        }\n        \n        setProducts( apiProducts );\n    }\n\n    return (\n        <div class=\"row\">\n        {products.map( product=><ProductCard {...product} />)}\n        </div>\n    )\n}\n\nexport default ProductListPage;\n","import React from \"react\";\n\nfunction RatingBar( props ){\n    let starsHtml = '';\n    for( let starCnt=1; starCnt<=5; starCnt++ ){\n        starsHtml += ( props.rating >= starCnt \n            ? '<i class=\"fas fa-star text-warning\"></i>'\n            : '<i class=\"far fa-star\"></i>' );\n    }\n    return (\n        <div dangerouslySetInnerHTML={{ __html: starsHtml }}></div>\n    )\n}\n\nexport default RatingBar;","import React from \"react\";\n\nfunction ProductReviewForm( props ){\n    return (\n        <form>\n            <div class=\"form-group\">\n                <label for=\"formName\">Email</label>\n                <input type=\"email\" class=\"form-control\" id=\"formName\" placeholder=\"name@example.com\" />\n            </div>\n            <div class=\"form-group\">\n                <label for=\"formRating\">Rating...</label>\n                <select class=\"form-control\" id=\"formRating\">\n                <option>1</option>\n                <option>2</option>\n                <option>3</option>\n                <option>4</option>\n                <option>5</option>\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label for=\"formReview\">Your Review</label>\n                <textarea class=\"form-control\" id=\"formReview\" rows=\"3\"></textarea>\n            </div>\n            <button class='btn btn-lg btn-primary' onClick={props.saveForm}>Save Review</button>\n        </form>        \n        )\n}\n\nexport default ProductReviewForm;\n","import React, { useState } from \"react\";\nimport RatingBar from \"./RatingBar\"\nimport ProductReviewForm from \"./ProductReviewForm\";\n\nfunction ProductReviews( props ){\n    const [ showForm, setShowForm ]= useState(false);\n    console.log( `[ProductReviews] showForm=`,showForm );\n\n    function saveForm( e ){\n        e.preventDefault();\n\n        setShowForm(false);\n    } \n\n    return ( <>\n        <hr />\n        { showForm ? <ProductReviewForm saveForm={saveForm} /> : \n            <div class='d-flex justify-content-end'>\n                <button class=\"btn btn-lg btn-secondary\" onClick={function(){ setShowForm(true) }}>\n                    <i class=\"fas fa-grin-stars\"></i> Review</button>\n            </div> }\n        <ul class=\"list-group\">\n        { props.reviews ? props.reviews.map( review=><li class=\"list-group-item\">\n            <div class='row'>\n                <div class='col-8'><b>{review.name}</b></div>\n                <div class='col-4 pull-right'><RatingBar rating={review.rating} /></div>\n            </div>\n            {review.review}\n            </li>) : '<li>No reviews yet</li>' }\n        </ul>\n        </>)\n\n}\n\nexport default ProductReviews;","import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport RatingBar from \"./RatingBar\";\nimport ProductReviews from \"./ProductReviews\";\nimport { useGlobalStore } from \"./GlobalStore\";\nimport API from \"./API\";\n\n\nfunction ProductInfoPage( props ){\n    const { id } = useParams();\n    const [ showProduct, setShowProduct ]= useState([]);\n    const [ globalData, dispatch ] = useGlobalStore();\n\n    // load only ONCE at component load\n    useEffect( function(){\n        loadProduct( id );\n    }, [] );\n\n    async function loadProduct( id ){  \n        const apiProduct = await API.get(`/api/product/${id}`);\n\n        if( apiProduct.error ){\n            dispatch( { do: 'setMessage', type: 'danger', message: apiProduct.error } );\n            return;\n        }        \n        setShowProduct( apiProduct );\n    }\n\n    function addToCart(){\n        dispatch({ \n            type: 'addToCart', id, num: 1, ...showProduct });\n    }\n\n    return (\n        <div class='container'>\n            <div class='row'>\n                <div class='col-4'>\n                    <img src={showProduct.image} class='img-thumbnail' />\n                </div>\n                <div class='col-8'>\n                    <h1>{showProduct.heading}</h1>\n                    <h2>{showProduct.price}</h2>\n\n                    <h3><RatingBar rating={showProduct.rating} /></h3>\n\n                    {/* <ProductAction /> */}\n                    <button onClick={addToCart} class=\"btn btn-lg btn-primary\"><i class=\"fas fa-cart-plus\"></i></button>\n                    \n                </div>\n                {showProduct.description}\n            </div>\n            <ProductReviews id={showProduct.id} reviews={showProduct.reviews} />                \n        </div>\n    )\n}\n\nexport default ProductInfoPage;","import React from \"react\";\n\nfunction SettingsPage( props ){\n    return (\n        <>[SettingsPage]</>\n    )\n}\n\nexport default SettingsPage;","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction ProductAddPage( props ){\n    return (\n        <div>[Product Add]</div>\n    )\n}\n\nexport default ProductAddPage;","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction ProductCartRow( props ){\n    const style = {\n        width: '64px', height: '64px'\n    }\n    \n    return (\n        <li class=\"list-group-item d-flex justify-content-between align-items-center\">\n            <Link to={'/productinfo/'+props.id}>\n                <img class=\"img-thumbnail\" src={props.image} style={style} /> \n                {props.heading}\n            </Link>\n\n            <span class=\"badge badge-secondary badge-pill pull-right\">{props.num}</span>\n        </li>\n    )\n}\n\nexport default ProductCartRow;","import React, { useState, useEffect } from \"react\";\nimport ProductCartRow from \"./ProductCartRow\";\nimport { useGlobalStore } from \"./GlobalStore\";\n\nfunction CartPage( props ){\n    const [ globalData, dispatch ] = useGlobalStore();\n\n    return (\n        <ul key={props.heading} class=\"list-group\">\n        {globalData.cart.map( product=><ProductCartRow {...product} />)}\n        </ul>\n    )\n}\n\nexport default CartPage;","import React, { useState, useRef } from \"react\";\nimport { Redirect } from 'react-router-dom';\nimport { useGlobalStore } from \"./GlobalStore\";\nimport API from \"./API\";\n\nfunction RegisterPage(){\n    // DECLARATIVE FORM OF PROGRAMMING\n    const [ globalData, dispatch ] = useGlobalStore();\n    const [ userData, setUserData ] = useState({ name: \"\", email: \"\", password: \"\"});\n    const [ isRegistered, setIsRegistered ] = useState( false );\n\n    const inputEmail = useRef();\n    const inputPassword = useRef();\n\n    function handleInputChange( e ){\n        const { id, value } = e.target; //\n\n        setUserData( { ...userData, [id]: value } );\n    }\n\n    async function registerUser( e ){\n        e.preventDefault();\n        \n        if( userData.email.trim() === \"\" ||\n            !(/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(userData.email)) ) {\n            inputEmail.current.focus();\n            dispatch( { do: 'setMessage', type: 'danger', message: 'Please provide a valid email' } );\n            return;\n        }\n\n        if( userData.password.trim() === \"\" ) {\n            inputPassword.current.focus();\n            dispatch( { do: 'setMessage', type: 'danger', message: 'Please provide a password' } );\n            return;\n        }\n\n        if( userData.password.trim().length < 8 ) {\n            inputPassword.current.focus();\n            dispatch( { do: 'setMessage', type: 'danger', message: 'Please provide a longer password (8 characters min)!' } );\n            return;\n        }\n\n        const apiResult = await API.post('/api/user/register', userData);\n                  \n        if( apiResult.error ){\n            dispatch( { do: 'setMessage', type: 'danger', message: apiResult.error } );\n            return;\n        }\n\n        // remember the email\n        localStorage.email = apiResult.rememberMe ? apiResult.email : '';\n\n        dispatch( { do: 'setMessage', type: 'success', message: 'Thank you successfully registered' } );\n\n        // let the message sit for a bit then redirect to login\n        setTimeout( function(){ setIsRegistered(true); }, 5000 );\n    }\n\n    return (\n        <div>\n            { isRegistered ? <Redirect to='/login' /> : '' }\n\n            <div class=\"container\">\n                <h1>User Registration</h1>\n                <div class=\"card\">\n                    <div class=\"card-header\">\n                    Register\n                    </div>\n                    <div class=\"card-body\">\n                    <form role=\"form\">\n                        <input type='hidden' id='db_id' value='' />\n                        <div class=\"form-group\">\n                            <label for=\"name\">First Name</label>\n                            <input value={userData.name} onChange={handleInputChange} id='name' type=\"text\" class=\"form-control\" />\n                        </div>\n                        <div class=\"form-group\">\n                            <label for=\"email\">Email Address</label>\n                            <input \n                                value={userData.email} \n                                onChange={handleInputChange} \n                                ref={inputEmail}\n                                id=\"email\" type=\"email\" class=\"form-control\" />\n                        </div>\n                        <div class=\"form-group\">\n                            <label for=\"userPassword\">Password</label>\n                            <input \n                                value={userData.password} \n                                onChange={handleInputChange} \n                                ref={inputPassword}\n                                id=\"password\" type=\"password\" class=\"form-control\" />\n                        </div>\n                        <button onClick={registerUser} class=\"btn btn-primary submit\" >Register</button>\n                    </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default RegisterPage;","import React, { useEffect } from 'react'\nconst API_URL = window.location.protocol+'//'+window.location.host.replace('localhost:3000','localhost:8080');\n\nlet oAuthWindow;\nlet oAuthPending = false;\n\nfunction OAuth( props ){\n    useEffect( function(){\n        // listen for message from popup window\n        window.addEventListener('message', function(e) {\n            // only listen to JSON messages, ignore rest\n            if( !(e && e.data && typeof(e.data)==='string' && e.data.substr(0,1)==='{' && e.data.substr(-1,1)==='}') ) \n                return;\n\n            const loginData = JSON.parse(e.data);\n            console.log(`<< from popup window, received:`, loginData);\n            if( oAuthWindow ) oAuthWindow.close();\n            // pass back the login info\n            if( props.loginComplete ) props.loginComplete(loginData);\n        } , false);\n    }, [] );\n     \n    /* \n    >> everestapp.herokuapp.com/oauth/twitter -> [passport plugin] -> api.twitter.com/oauth/....\n    << everestapp.herokuapp.com/oauth/twitter/callback with user-name + thumnbail + access-token\n       JSON string with information that we can pass to the parent window\n    */\n    function openOAuth( client ) {\n        if (oAuthPending) return;\n\n        // get the popup window ready (center) and open!\n        const width = 600, height = 600\n        const left = (window.innerWidth / 2) - (width / 2)\n        const top = (window.innerHeight / 2) - (height / 2)\n        const url = `${API_URL}/oauth/${client}`\n        console.log( `[openOAuth] opening url: ${url}`)\n        oAuthWindow =  window.open(url, '',       \n          `toolbar=no, location=no, directories=no, status=no, menubar=no, \n          scrollbars=no, resizable=no, copyhistory=no, width=${width}, \n          height=${height}, top=${top}, left=${left}` );\n\n        oAuthPending = true;\n        // monitor popup\n        checkPopup()\n    }\n\n    function checkPopup() {\n        const check = setInterval(() => {\n          if (!oAuthWindow || oAuthWindow.closed || oAuthWindow.closed === undefined) {\n            clearInterval(check)\n            oAuthPending = false;\n          }\n        }, 1000)\n    }\n    const icons = {\n        facebook: \"fa-facebook-square\",\n        twitter: \"fa-twitter-square\",\n        google: \"fa-google-plus-square\",\n        github: \"fa-github-square\",\n        linkedin: \"fa-linkedin\"\n    }\n    return (\n        <div class=\"card\">\n            <div class=\"card-body d-flex justify-content-center\">\n                {props.providers.map( provider=>\n\n                    <button onClick={()=>openOAuth(provider)} class='btn btn-outline-primary' style={{marginRight:'10px'}}>\n                        <i className={`fab ${icons[provider]} fa-3x`}></i>\n                    </button>\n                )}\n            </div>\n        </div>\n    )\n}\n\nexport default OAuth;\n","import React, { useState, useRef } from \"react\";\nimport { Redirect } from 'react-router-dom';\nimport API from \"./API\";\nimport { useGlobalStore } from \"./GlobalStore\";\nimport OAuth from \"./OAuth\";\n\nfunction LoginPage(){\n    // DECLARATIVE FORM OF PROGRAMMING\n    const [ userData, setUserData ] = useState({ name: \"\", email: localStorage.email, password: \"\", rememberMe: true });\n    const [ globalData, dispatch ] = useGlobalStore();\n\n    const inputEmail = useRef();\n    const inputPassword = useRef();\n\n    function handleInputChange( e ){\n        const { id, value } = e.target; //\n\n        setUserData( { ...userData, [id]: value } );\n    }\n\n    function handleCheckbox(){\n        setUserData( { ...userData, rememberMe: !userData.rememberMe } );\n    }\n\n    function loginComplete( loginData ){        \n        dispatch( { do: 'setMessage', type: 'success', message: loginData.message } );\n        delete loginData.message;\n\n        // save the active session\n        localStorage.session = loginData.session;\n\n        // remember the user session + data\n        dispatch( { do: 'setUserData', data: loginData } );\n\n        setTimeout( function(){ \n            dispatch( { do: 'clearMessage' } );\n            dispatch( { do: 'loginState', loggedIn: true })\n            }, 3000 );\n    }\n\n    async function loginUser( e ){\n        e.preventDefault();\n        \n        if( userData.email === \"\" ) {\n            inputEmail.focus();\n            dispatch( { do: 'setMessage', type: 'danger', message: 'Please enter your email!' } );\n            return;\n        }\n    \n        if( userData.password === \"\" || userData.password.length < 8 ) {\n            inputPassword.current.focus();\n            dispatch( { do: 'setMessage', type: 'danger', message: 'Please enter your password!' } );\n            return;\n        }\n\n        const apiResult = await API.post( '/api/user/login', userData );\n                  \n        if( apiResult.error ){\n            dispatch( { do: 'setMessage', type: 'danger', message: apiResult.error } );\n            // clear any session\n            localStorage.session = '';\n            return;\n        };\n\n        loginComplete( apiResult );\n    }\n\n    return (\n        <div>\n            { globalData.loggedIn ? <Redirect to='/productlist' /> : '' }\n\n            <hr />\n            <h1>Login</h1>\n        \n            <div class=\"container\">\n                <OAuth providers={['twitter','facebook','github','google','linkedin']} loginComplete={loginComplete} />\n                <div class=\"card\">\n                    <div class=\"card-body\">\n                    <form role=\"form\">\n                        <div class=\"form-group\">\n                            <label for=\"userEmail\">Email Address</label>\n                            <input \n                                value={userData.email} \n                                onChange={handleInputChange} \n                                ref={inputEmail}\n                                id=\"email\" type=\"email\" class=\"form-control\" />\n                        </div>\n                        <div class=\"form-group\">\n                            <label for=\"userPassword\">Password</label>\n                            <input \n                                value={userData.password} \n                                onChange={handleInputChange} \n                                ref={inputPassword}\n                                id=\"password\" type=\"password\" class=\"form-control\" />\n                        </div>\n                        <button onClick={loginUser} type=\"button\" class=\"btn btn-primary submit\">Login</button>\n                        &nbsp; \n                        <input type=\"checkbox\"\n                        checked={userData.rememberMe} onChange={handleCheckbox} />                        \n                        <label class='text-secondary' for='rememberMe'>Remember Me</label> &nbsp;\n                        <a href=\"/register\">Need to Register?</a>\n                    </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default LoginPage;","import React, { useEffect } from \"react\";\nimport { Redirect } from 'react-router-dom';\nimport API from \"./API\";\nimport { useGlobalStore } from \"./GlobalStore\";\n\nfunction LogoutPage(){\n    const [ globalData, dispatch ] = useGlobalStore();\n\n    useEffect( function(){\n        // attempt to request logout (only once)\n        logoutRequest();\n        }, [] );\n\n\n    // call the api to logout (and clear session)\n    async function logoutRequest(){\n        console.log( `[logoutRequest] attempting to logout...` );\n        const apiResult = await API.post( '/api/user/logout', {} );\n                    \n        console.log( `apiResult: `, apiResult );\n\n        // quit if error\n        if( apiResult.error ){\n            dispatch( { do: 'setMessage', type: 'danger', message: apiResult.error } );\n            return;\n        }\n\n        dispatch( { do: 'setMessage', type: 'success', message: 'Logged out...' } );\n\n        // save the active session\n        localStorage.session = '';\n\n        setTimeout( function(){ \n                dispatch( { do: 'loginState', loggedIn: false })\n            }, 3000 );\n    }\n    \n\n    return (\n        <div>\n            { globalData.loggedIn ? '' : <Redirect to='/login' /> }\n\n\\            <section class=\"jumbotron text-center\">\n            <div class=\"container\">\n                <p class=\"lead text-muted\">Please wait, logging out...</p>\n            </div>\n            </section>\n        </div>\n    )\n}\n\nexport default LogoutPage;","import React from \"react\";\n\nfunction Footer( props ){\n    return (\n        <>\n            <div id=\"footer-padding\"></div>\n            <div id=\"footer\">(c) 2020 The Everest Team</div>\n        </>\n    )\n}\n\nexport default Footer;","import React from 'react';\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\n\nimport { GlobalStore } from \"./components/GlobalStore\";\nimport NavBar from './components/NavBar';\nimport ProductListPage from './components/ProductListPage';\nimport ProductInfoPage from './components/ProductInfoPage';\nimport SettingsPage from './components/SettingsPage';\nimport ProductAddPage from './components/ProductAddPage';\nimport CartPage from './components/CartPage';\nimport RegisterPage from './components/RegisterPage';\nimport LoginPage from './components/LoginPage';\nimport LogoutPage from './components/LogoutPage';\nimport Footer from './components/Footer';\n\nfunction App() {\n  return (\n    <Router>\n      <GlobalStore> {/* provides common elements across components */}\n      <div className=\"App\">\n          <NavBar />\n          <div class=\"container\">\n            <Route exact path={[\"/\",\"/productlist\"]} component={ProductListPage} />\n            <Route path=\"/productinfo/:id\" component={ProductInfoPage} />\n            <Route exact path=\"/productadd\" component={ProductAddPage} />\n            <Route exact path=\"/cart\" component={CartPage} />\n            <Route exact path=\"/register\" component={RegisterPage} />\n            <Route exact path=\"/login\" component={LoginPage} />\n            <Route exact path=\"/logout\" component={LogoutPage} />\n            <Route exact path=\"/settings\" component={SettingsPage} />\n          </div>\n\n          <Footer />\n      </div>\n      </GlobalStore>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}
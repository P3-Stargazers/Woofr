{"version":3,"sources":["utils/GlobalStore.js","utils/API.js","components/NavBar.js","components/Footer.js","components/AlertBar.js","components/ProductCard.js","pages/Products.js","components/RatingBar.js","components/ProductReviewForm.js","components/ProductReviews.js","pages/ProductsInfo.js","pages/ProductsAdd.js","pages/Register.js","components/OAuth.js","pages/Login.js","pages/Logout.js","components/CartRow.js","pages/Cart.js","pages/Settings.js","App.js","index.js"],"names":["initialData","authOk","name","thumbnail","products","alert","cart","dataReducer","state","action","type","data","message","updatedCart","id","num","idx","findIndex","c","push","console","log","StoreContext","createContext","useStoreContext","useContext","StoreProvider","props","useReducer","dispatch","Provider","value","fetchJSON","timeout","url","method","fetchOptions","toLowerCase","headers","localStorage","session","body","JSON","stringify","fetch","then","res","json","NavBar","useState","showMenu","setShowMenu","cartNum","setCartNum","location","useLocation","a","status","userData","useEffect","clearTimeout","setTimeout","reduce","total","item","length","loadUserSession","class","to","className","src","alt","width","height","onClick","data-toggle","data-target","activeClassName","Footer","AlertBar","clearAlert","ProductCard","key","_id","e","cartAdd","image","description","title","heading","price","Products","inputRef","useRef","userProducts","preventDefault","newTask","current","task","productsLoad","map","product","ref","placeholder","disabled","RatingBar","html","_","rating","dangerouslySetInnerHTML","__html","join","ProductReviewForm","for","rows","saveForm","ProductReviews","showForm","setShowForm","reviews","review","ProductsInfo","useParams","productData","setProductData","productNum","setProductNum","filter","productLoad","ProductAddPage","Register","oAuthWindow","inputEmail","inputPassword","inputName","refForm","checkValidity","classList","add","regData","trim","email","password","indexOf","focus","required","pattern","API_URL","window","protocol","host","replace","oAuthPending","OAuth","openOAuth","client","left","innerWidth","top","innerHeight","open","check","setInterval","closed","undefined","clearInterval","checkPopup","addEventListener","substr","oAuthData","parse","close","userLoginComplete","icons","facebook","twitter","google","github","linkedin","providers","provider","style","marginRight","Login","inputRememberMe","userLoginSave","saveData","rememberMe","checked","Logout","userLogout","ProductCartRow","Cart","cartProducts","setCartProducts","cartItem","SettingsPage","App","exact","path","component","ProductsAdd","Settings","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b6ed7a00.chunk.js","sourcesContent":["import React, { createContext, useReducer, useContext } from 'react'\n\n// any variables we depend on for UI/flow we must pre-set\nconst initialData = {\n   authOk: false, name: '', thumbnail: '', products: [], alert: '', cart: []\n}\n\n/*! IMPORTANT all your reducer functionality goes here */\nconst dataReducer = (state, action) => {\n   switch (action.type) {\n   case 'USER_LOGIN':\n      return { ...state, ...action.data, alert: action.message || '', authOk: true }\n   case 'USER_LOGOUT':\n      return { ...initialData, alert: action.message || '' }\n   case 'ALERT_MESSAGE':\n      return { ...state, alert: action.message }\n   case 'ALERT_CLEAR':\n      return { ...state, alert: '' }\n   case 'UPDATE_PRODUCTS':\n      return { ...state, products: action.products, alert: action.message || '' }\n    case 'CART_ADD':\n      let updatedCart =[ ...state.cart ]\n      const { id, num }= action\n      const idx = updatedCart.findIndex( c=>c.id===id )\n      if( idx>-1 )\n        updatedCart[idx].num++\n      else\n        updatedCart.push({ id, num })\n      console.log( `[CART_ADD] adding ${id} num(${num}) state.cart:`, updatedCart )\n      return { ...state, cart: updatedCart }  \n   default:\n      console.log(`Invalid action type: ${action.type}`)\n      return state\n   }\n}\n\n\n\nconst StoreContext = createContext()\n\nconst useStoreContext = function(){\n   return useContext(StoreContext)\n}\n\nconst StoreProvider = function(props){\n   const [state, dispatch] = useReducer( dataReducer, initialData )\n   return <StoreContext.Provider value={[state, dispatch]} {...props} />\n}\n\nexport { StoreProvider, useStoreContext }","/*\n    note how we wrap our api fetch in this function that allows us to do some\n    additional error / message handling for all API calls...\n*/\nfunction fetchJSON( url, method='get', data={} ){\n    method = method.toLowerCase()\n    const fetchOptions = {\n        method,\n        headers: {\n            'Content-Type': 'application/json',\n            // looks for a session entry in localStorage, and if so pass it\n            'Session': localStorage.session || ''\n        }\n    }\n    // only attach the body for put/post\n    if( method === 'post' || method === 'put' ) {\n        fetchOptions.body = JSON.stringify( data )\n    }\n  \n    return fetch( url,fetchOptions ).then( res=>res.json() )\n}\n\nexport default fetchJSON","import React, { useState, useEffect } from 'react'\nimport { Redirect, NavLink, useLocation } from 'react-router-dom'\nimport { useStoreContext } from '../utils/GlobalStore'\nimport fetchJSON from '../utils/API'\n\nlet timeout\n\nfunction NavBar() {\n  const [{ authOk, name, thumbnail, cart }, dispatch ]= useStoreContext()\n  const [ showMenu, setShowMenu ] = useState( false )\n  const [ cartNum, setCartNum ]= useState( 0 )\n  const location = useLocation()\n\n  async function loadUserSession(){\n    const { status, userData, message }= await fetchJSON( `/api/users/session` )\n    console.log( `[NavBar] attempted to reload session, result(${status}) message(${message})` )\n    if( !status ){\n       // clear any session\n       localStorage.session = ''\n       dispatch({ type: 'ALERT_MESSAGE', message })\n       return\n    }\n    dispatch({ type: 'USER_LOGIN', data: userData })\n  }\n\n  useEffect( function(){\n    if( showMenu ){\n        if( timeout ) {\n          clearTimeout( timeout )\n        }\n        timeout = setTimeout( function(){\n          setShowMenu( false );\n        }, 2000 )\n    }\n  }, [ showMenu ])\n\n  // location changed so hide menu\n  useEffect( function(){\n    if( timeout ) {\n        clearTimeout( timeout )\n    }\n    setShowMenu( false )\n  }, [ location ])\n\n  useEffect( function(){\n    // changes in the cart, then re-calculate the total\n    console.log( `.. updating cart num: `, cart.reduce( (total,item) => total+item.num, 0 ) )\n    setCartNum( cart.reduce( (total,item) => total+item.num, 0 ) )\n  }, [ cart ])\n\n  useEffect( function(){\n    // on load let's get the session if it's blank (Ex browser reload)\n    if( localStorage.session.length===36 && !authOk ){\n      loadUserSession()\n    }\n  }, [] )\n\n   return (\n      <>\n         { localStorage.session.length!==36 && !authOk ? <Redirect to='/login' /> :\n            <nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n               <NavLink to=\"/\" className=\"navbar-brand\">\n                  <img src='https://upload.wikimedia.org/wikipedia/commons/7/79/Mountain_icon_%28Noun_Project%29.svg' alt=\"mountain icon\" width=\"64\" height=\"64\" />\n               </NavLink>\n               <button onClick={() => setShowMenu(!showMenu)} class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbar\">\n                  <span class=\"navbar-toggler-icon\"></span>\n               </button>\n\n               <div className={'collapse navbar-collapse '+(showMenu ? 'show' : '')} id=\"navbar\">\n                  <ul class=\"navbar-nav me-auto mb-2 mb-lg-0\">\n                     <li className=\"nav-item\">\n                        <NavLink to=\"/products\" className=\"nav-link\" activeClassName=\"active\">Product List</NavLink>\n                     </li>\n                     <li className=\"nav-item\">\n                        <NavLink to=\"/products/add\" className=\"nav-link\" activeClassName=\"active\">Product Add</NavLink>\n                     </li>\n                     <li className=\"nav-item\">\n                        <NavLink to=\"/settings\" className=\"nav-link\" activeClassName=\"active\">Settings</NavLink>\n                     </li>\n                     <li className=\"nav-item\">\n                        <NavLink to=\"/cart\" className=\"nav-link\" activeClassName=\"active\">\n                          <i class=\"fas fa-shopping-cart\"></i> Cart { cartNum>0 && <span class=\"badge rounded-pill bg-warning text-dark\">{cartNum}</span> }\n                        </NavLink>\n                     </li>\n                     <li className=\"nav-item\">\n                        <NavLink to=\"/logout\" className=\"nav-link\">Logout</NavLink>\n                      </li> \n                  </ul>\n                  { thumbnail && <div class=\"d-flex\"><div class=\"mx-3\"><img src={thumbnail} id='navThumbnail' alt=\"user thumbnail\" width=\"64\" height=\"64\" /></div></div> }\n                  { !thumbnail && name && <div class=\"d-flex\"><div class=\"mx-3\">Welcome back <u>{name}</u></div></div> }\n               </div>\n            </nav>\n         }\n      </>\n   )\n}\n\nexport default NavBar","import React from \"react\"\n\nfunction Footer(){\n    return (\n        <>  \n            <hr />\n            <div id=\"footer-padding\"></div>\n            <div id=\"footer\">(c) Everest Team</div>\n        </>\n    )\n}\n\nexport default Footer","import React, { useEffect } from 'react'\nimport { useStoreContext } from \"../utils/GlobalStore\"\n\nlet timeout\n\nfunction AlertBar() {\n  const [{ alert }, dispatch ]= useStoreContext()\n\n  function clearAlert(){\n    // if user clicked on the box, then timeout may still exist, so clear it\n    if( timeout ) clearTimeout( timeout )\n\n    dispatch({ type: \"ALERT_CLEAR\" })\n  }\n\n  useEffect( function(){\n    if( alert ){\n      // monitor alert variable, if it is set, we trigger a 3s timer to clear it\n      // (debounce an previous pending clears)\n      if( timeout ){\n        clearTimeout( timeout )\n      }\n      timeout = setTimeout( clearAlert, 3000 )\n    }\n  }, [ alert ])\n  \n  return ( \n    <>\n      { alert && <div onClick={clearAlert} class=\"navbar fixed-top alert alert-warning mx-5\">{alert}</div> }\n    </>\n  )\n}\n\nexport default AlertBar","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nfunction ProductCard( props ){\n   return (\n      <div key={props._id} className=\"card mx-auto col-4 mb-3\">\n         <button onClick={(e)=>props.cartAdd(e,props._id,1)} class=\"btn btn-sm btn-outline-secondary\"><i class=\"fas fa-cart-plus\"></i></button>\n         <Link to={'/products/info/'+props._id}>\n            <img className=\"card-img-top\" src={props.image} alt={props.description} title={props.description} />\n            <div className=\"card-body\">\n               <h4 className=\"card-title\">{props.heading}</h4>\n               <p className=\"card-text\">{props.price}</p>\n            </div>\n         </Link>\ns\n      </div>\n   )\n}\n\nexport default ProductCard;","import React, { useEffect, useRef } from 'react'\nimport { useStoreContext } from '../utils/GlobalStore'\nimport fetchJSON from '../utils/API'\nimport ProductCard from '../components/ProductCard'\n\nfunction Products() {\n  const [{ alert, products, name }, dispatch ]= useStoreContext()\n\n  const inputRef = useRef()\n\n  async function productsLoad(){\n    const { status, products: userProducts, message }= await fetchJSON( '/api/products' )\n    console.log( `[productsLoad] status(${status}) message(${message}) userProducts:`, userProducts )\n    if( !status ){\n      dispatch({ type: 'ALERT_MESSAGE', message })\n      return\n    }\n\n    // update tasks list\n    dispatch({ type: 'UPDATE_PRODUCTS', products: userProducts })\n   }\n\n  function cartAdd( e, id, num ){\n    e.preventDefault()\n    // the component is re-rendered multiple times, so it triggers this dispatch twice\n    dispatch({ type: 'CART_ADD', id, num })\n  }\n\n\n   async function tasksSave( e ){\n      e.preventDefault()\n\n      const newTask = inputRef.current.value\n      // clear input\n      inputRef.current.value = ''\n\n      const { status, products: userProducts, message }= await fetchJSON( '/api/products', 'post', { task: newTask } )\n      if( !status ){\n         dispatch({ type: 'ALERT_MESSAGE', message })\n         return\n      }\n\n      dispatch({ type: 'UPDATE_PRODUCTS', products: userProducts, message })\n   }\n\n  // on load get the list\n  useEffect( function(){\n    console.log( `[Products] mount`)\n    productsLoad()\n  }, [] )\n\n   return (\n      <form>\n         <div class=\"card\">\n            <div class=\"card-header\">\n               <h1>{name}'s Product List</h1>\n            </div>\n            <div class=\"card-body row\">\n               {products && products.map( product=><ProductCard cartAdd={cartAdd} {...product} />)}\n            </div>\n\n            <div class=\"card-footer\">\n               <div class=\"input-group\">\n                  <input ref={inputRef} type=\"text\" class=\"form-control\" placeholder='New Task...' />\n                  <button onClick={tasksSave} disabled={alert.length>0} class=\"btn btn-primary\">Save</button>\n               </div>\n            </div>\n         </div>\n      </form>\n   )\n}\n\nexport default Products","import React from 'react'\n\nfunction RatingBar( props ){\n   const html = ['*','*','*','*','*'].map( (_,idx)=>`<i class=\"${props.rating>idx ? 'fas fa-star text-warning' : 'far fa-star text-secondary'}\"></i>` )\n   return (\n      <div dangerouslySetInnerHTML={{ __html: html.join('') }}></div>\n   )\n}\n\nexport default RatingBar","import React from 'react';\n\nfunction ProductReviewForm( props ){\n   return (\n      <form>\n         <div class=\"form-group\">\n            <label for=\"formName\">Email</label>\n            <input type=\"email\" class=\"form-control\" id=\"formName\" placeholder=\"name@example.com\" />\n         </div>\n         <div class=\"form-group\">\n            <label for=\"formRating\">Rating...</label>\n            <select class=\"form-control\" id=\"formRating\">\n               <option>1</option>\n               <option>2</option>\n               <option>3</option>\n               <option>4</option>\n               <option>5</option>\n            </select>\n         </div>\n         <div class=\"form-group\">\n            <label for=\"formReview\">Your Review</label>\n            <textarea class=\"form-control\" id=\"formReview\" rows=\"3\"></textarea>\n         </div>\n         <button class='btn btn-lg btn-primary' onClick={props.saveForm}>Save Review</button>\n      </form>\n   )\n}\n\nexport default ProductReviewForm\n","import React, { useState } from 'react'\nimport RatingBar from './RatingBar'\nimport ProductReviewForm from './ProductReviewForm'\n\nfunction ProductReviews( props ){\n   const [ showForm, setShowForm ]= useState(false)\n\n   function saveForm( e ){\n      e.preventDefault();\n\n      setShowForm(false);\n   }\n\n   return ( <>\n      <hr />\n      <ul class=\"list-group\">\n         { props.reviews ? props.reviews.map( review=>(\n         <li class=\"list-group-item\">\n            <div class='row'>\n               <div class='col-8'><b>{review.name}</b></div>\n               <div class='col-4 pull-right'><RatingBar rating={review.rating} /></div>\n            </div>\n            {review.review}\n         </li>)) : '<li>No reviews yet</li>' }\n      </ul>\n      { showForm ? <ProductReviewForm saveForm={saveForm} /> :\n         <div class='d-flex justify-content-end'>\n            <button class=\"btn btn-lg btn-secondary\" onClick={()=>setShowForm(true)}>\n            <i class=\"fas fa-grin-stars\"></i> Add Review</button>\n         </div> }\n   </>)\n\n}\n\nexport default ProductReviews;","import React, { useState, useEffect } from 'react'\nimport { useParams } from 'react-router-dom'\nimport RatingBar from '../components/RatingBar'\nimport ProductReviews from '../components/ProductReviews'\nimport fetchJSON from '../utils/API'\nimport { useStoreContext } from '../utils/GlobalStore'\n\nfunction ProductsInfo(){\n    const [{ cart }, dispatch ] = useStoreContext()\n    const { id } = useParams()\n    const [ productData, setProductData ]= useState([])\n    const [ productNum, setProductNum ]= useState(0)\n\n    async function productLoad( id ){\n        const { status, products, message }= await fetchJSON( `/api/products/${id}` )\n        if( !status || products.length!==1 ){\n            dispatch({ type: 'ALERT_MESSAGE', message })\n            return\n        }\n        setProductData( products[0] )\n   }\n\n   function cartAdd(){\n      console.log( '[cartAdd] called...' );\n      // the component is re-rendered multiple times, so it triggers this dispatch twice\n      dispatch({ type: 'CART_ADD', id, num: 1, ...productData })\n   }\n\n   useEffect( function(){\n    // get the count of this item in the cart\n    const cartItem = cart.filter(c=>c.id===id)\n    if( cartItem.length===1 )\n        setProductNum( cart.filter(c=>c.id===id)[0].num )\n       \n   }, [ cart ])\n    // load only ONCE at component load\n    useEffect( function(){\n        productLoad( id )\n    }, [] )\n\n   return (\n       <>\n         <div class='row mt-3'>\n            <div class='col-4'>\n               <img src={productData.image} class='img-thumbnail' />\n            </div>\n            <div class='col-8'>\n               <h1>{productData.heading}</h1>\n               <h2>{productData.price}</h2>\n\n               <h3><RatingBar rating={productData.rating} /></h3>\n\n               {/* <ProductAction /> */}\n               <button onClick={cartAdd} class=\"btn btn-lg btn-primary\"><i class=\"fas fa-cart-plus\"></i></button> ({productNum})\n\n            </div>\n            <p class=\"mx-3 mt-3\">{productData.description}</p>\n         </div>\n         <ProductReviews id={productData.id} reviews={productData.reviews} />\n      </>\n   )\n}\n\nexport default ProductsInfo","import React from 'react';\n\nfunction ProductAddPage( props ){\n   return (\n      <div>[Product Add]</div>\n   )\n}\n\nexport default ProductAddPage;","import React, { useRef, useEffect } from 'react'\nimport { Redirect, Link } from 'react-router-dom'\nimport { useStoreContext } from '../utils/GlobalStore'\nimport fetchJSON from '../utils/API'\n\nfunction Register(){\n   const [{ authOk }, dispatch ] = useStoreContext()\n\n   const inputEmail = useRef()\n   const inputPassword = useRef()\n   const inputName = useRef()\n   const refForm = useRef()\n\n   async function registerUser( e ){\n      e.preventDefault()\n\n      // leverage browser built in + bootstrap features for form validation\n      if( !refForm.current.checkValidity() ){\n         refForm.current.classList.add('was-validated')\n         return\n      }\n\n      const regData = {\n         name: inputName.current.value.trim(),\n         email: inputEmail.current.value.trim(),\n         password: inputPassword.current.value.trim()\n      }\n      // double-check the browser form validation\n      if( regData.name.length<3 || regData.email.indexOf('@')<3 || regData.password.length<8 ){\n         inputName.current.focus()\n         dispatch({ type: 'ALERT_MESSAGE', message: 'Please complete your reg info' })\n         return\n      }\n\n      const { status, session, userData, message }= await fetchJSON( '/api/users/register', 'post', regData )\n      if( !status ){\n         // clear any session\n         localStorage.session = ''\n         dispatch({ type: 'ALERT_MESSAGE', message })\n         return\n      }\n\n      // notify user message; set user session/data\n      localStorage.session = session\n      dispatch({ type: 'USER_LOGIN', data: userData, message })\n   }\n\n   useEffect( function(){\n      // if remembered email, insert\n      inputEmail.current.value = localStorage.email || ''\n   }, [] )\n\n   return (\n      <>\n         { authOk ? <Redirect to='/tasks' /> : '' }\n         <form ref={refForm}>\n            <div class=\"card mt-5\">\n               <div class=\"card-header\">\n                  <h1>User Registration</h1>\n               </div>\n               <div class=\"card-body\">\n                  <div class=\"mb-3\">\n                     <label for=\"name\">First Name</label>\n                     <input ref={inputName} type=\"text\" id=\"name\" class=\"form-control\" required />\n                     <div class=\"invalid-feedback\">\n                            Please enter a name\n                     </div>\n                  </div>\n                  <div class=\"mb-3\">\n                     <label for=\"email\">Email Address</label>\n                     <input ref={inputEmail} id=\"email\" type=\"email\" class=\"form-control\" required />\n                     <div class=\"invalid-feedback\">\n                            Please enter an email\n                     </div>\n                  </div>\n                  <div class=\"mb-3\">\n                     <label for=\"userPassword\">Password</label>\n                     <input ref={inputPassword} id=\"userPassword\" type=\"password\" class=\"form-control\" pattern=\".{8,}\" required />\n                     <div class=\"invalid-feedback\">\n                            Please enter a password (8 chars min)\n                     </div>\n                  </div>\n               </div>\n               <div class=\"card-footer\">\n                  <button onClick={registerUser} class=\"btn btn-primary mx-1\" >Register</button>\n                  <Link to=\"/login\" class=\"font-weight-light text-muted mx-3\">Already Registered?</Link>\n               </div>\n            </div>\n         </form>\n      </>\n   )\n}\n\nexport default Register","import React, { useEffect } from 'react'\nconst API_URL = window.location.protocol+'//'+window.location.host.replace('localhost:3000','localhost:8080')\n\nlet oAuthWindow\nlet oAuthPending = false\n\nfunction OAuth( props ){\n   useEffect( function(){\n      // listen for message from popup window\n      window.addEventListener('message', function(e) {\n         // only listen to JSON messages, ignore rest\n         if( !(e && e.data && typeof(e.data)==='string' && e.data.substr(0,1)==='{' && e.data.substr(-1,1)==='}') ) {\n            return;\n         }\n\n         const oAuthData = JSON.parse(e.data)\n         console.log('<< from popup window, received:', oAuthData)\n         if( oAuthWindow ) {\n            oAuthWindow.close()\n         }\n         // pass back the login info: { status, session, userData, message }\n         if( props.userLoginComplete ) {\n            props.userLoginComplete(oAuthData)\n         }\n      } , false)\n   }, [] );\n\n   function checkPopup() {\n      const check = setInterval(() => {\n         if (!oAuthWindow || oAuthWindow.closed || oAuthWindow.closed === undefined) {\n            clearInterval(check)\n            oAuthPending = false\n         }\n      }, 1000)\n   }\n   /*\n    >> everestapp.herokuapp.com/oauth/twitter -> [passport plugin] -> api.twitter.com/oauth/....\n    << everestapp.herokuapp.com/oauth/twitter/callback with user-name + thumnbail + access-token\n       JSON string with information that we can pass to the parent window\n    */\n   function openOAuth( client ) {\n      if (oAuthPending) {\n         return\n      }\n\n      // get the popup window ready (center) and open!\n      const width = 600, height = 600\n      const left = (window.innerWidth / 2) - (width / 2)\n      const top = (window.innerHeight / 2) - (height / 2)\n      const url = `${API_URL}/oauth/${client}`\n      console.log( `[openOAuth] opening url: ${url}`)\n      oAuthWindow = window.open(url, '',\n         `toolbar=no, location=no, directories=no, status=no, menubar=no, \n          scrollbars=no, resizable=no, copyhistory=no, width=${width}, \n          height=${height}, top=${top}, left=${left}` )\n\n      oAuthPending = true\n      // monitor popup\n      checkPopup()\n   }\n\n   const icons = {\n      facebook: 'fa-facebook-square',\n      twitter: 'fa-twitter-square',\n      google: 'fa-google-plus-square',\n      github: 'fa-github-square',\n      linkedin: 'fa-linkedin'\n   }\n   return (\n      <div class=\"card\">\n         <div class=\"card-body d-flex justify-content-center\">\n            {props.providers.map( provider=>\n\n               <button onClick={()=>openOAuth(provider)} class='btn btn-outline-secondary' style={{marginRight:'10px'}}>\n                  <i className={`fab ${icons[provider]} fa-3x`}></i>\n               </button>\n            )}\n         </div>\n      </div>\n   )\n}\n\nexport default OAuth\n","import React, { useEffect, useRef } from 'react'\nimport { Redirect, Link } from 'react-router-dom'\nimport { useStoreContext } from '../utils/GlobalStore'\nimport fetchJSON from '../utils/API'\nimport OAuth from \"../components/OAuth\"\n\nfunction Login(){\n   const [{ authOk }, dispatch ]= useStoreContext()\n\n   const inputEmail = useRef()\n   const inputPassword = useRef()\n   const inputRememberMe = useRef()\n   const refForm = useRef()\n\n   \n   function userLoginSave({ status, session, userData, message }){ \n      // login ok, saving session & saving userData\n      console.log( `[userLoginSave] data:`, userData )\n      if( !status ){\n         // clear any session\n         localStorage.session = ''\n         dispatch({ type: 'ALERT_MESSAGE', message })\n         return\n      }      \n      localStorage.session = session\n      dispatch({ type: 'USER_LOGIN', data: userData })\n   }\n\n   async function userLogin( e ){\n      e.preventDefault()\n      console.log( '[userLogin]' )\n\n      // leverage browser built in + bootstrap features for form validation\n      if( !refForm.current.checkValidity() ){\n         refForm.current.classList.add('was-validated')\n         return\n      }\n\n      const saveData = {\n         email: inputEmail.current.value,\n         password: inputPassword.current.value,\n         rememberMe: inputRememberMe.current.checked\n      }\n\n      if( saveData.email.indexOf('@')<3 || saveData.password.length<8 ) {\n         inputEmail.current.focus()\n         dispatch({ type: 'ALERT_MESSAGE', message: 'Please complete your form!' })\n         return\n      }\n\n      const { status, session, userData, message }= await fetchJSON( '/api/users/login', 'post', saveData )\n\n      // remember email if user wanted\n      if( inputRememberMe && inputRememberMe.current.checked ){\n         localStorage.email = inputEmail.current.value\n      } else {\n         localStorage.email = ''\n      }\n\n      userLoginSave({ status, session, userData, message })\n   }\n\n   // at startup we initialize a few things\n   useEffect( function(){\n      inputEmail.current.value = localStorage.email || ''\n      inputRememberMe.current.checked = true\n   }, [] )\n\n   return (\n      <>\n         { authOk ? <Redirect to='/products' /> : '' }\n         <form ref={refForm}>\n            <div class=\"card mt-5\">\n               <div class=\"card-header\">\n                  <h1>Login</h1>\n               </div>\n               <div class=\"card-body\">\n                  <div class=\"mb-3\">\n                     <label for=\"email\" class=\"form-label\">Email address</label>\n                     <input ref={inputEmail} id=\"email\" type=\"email\" class=\"form-control\" required />\n                     <div class=\"invalid-feedback\">\n                            Please enter your login email\n                     </div>                     \n                  </div>\n                  <div class=\"mb-3\">\n                     <label for=\"userPassword\">Password</label>\n                     <input ref={inputPassword} id=\"userPassword\" type=\"password\" class=\"form-control\" pattern=\".{8,}\" required />\n                     <div class=\"invalid-feedback\">\n                            Please enter your password (8 chars min)\n                     </div>                     \n                  </div>\n               </div>\n               <div class=\"card-footer\">\n                  <button onClick={userLogin} type=\"button\" class=\"btn btn-primary mx-1\">Login</button>\n                    &nbsp;\n                  <input ref={inputRememberMe} id='rememberMe' type=\"checkbox\" />\n                  <label class='text-secondary' for='rememberMe'>Remember Me</label> &nbsp;\n                  <Link to=\"/register\" class=\"mx-3\">Need to Register?</Link>\n               </div>\n               <OAuth providers={['twitter','facebook','github','google','linkedin']} userLoginComplete={userLoginSave} />\n            </div>\n         </form>\n      </>\n   )\n}\n\nexport default Login","import React, { useEffect } from \"react\"\nimport { Redirect } from 'react-router-dom'\nimport { useStoreContext } from \"../utils/GlobalStore\"\nimport fetchJSON from \"../utils/API\"\n\nfunction Logout(){\n    const [{ authOk }, dispatch ]= useStoreContext()\n\n    \n    async function userLogout(){\n        // call the api to logout (and clear session)\n        const { message } = await fetchJSON( '/api/users/logout' )\n        // logout\n        localStorage.session = ''\n        dispatch({ type: 'USER_LOGOUT', message })\n    }\n    \n    useEffect( function(){\n        // attempt to request logout (ONCE on page load)\n        userLogout()\n    }, [] )\n\n    return (\n        <>\n            { !authOk && <Redirect to='/login' /> }\n            <h1>Please wait, logging out...</h1>\n        </>\n    )\n}\n\nexport default Logout","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nfunction ProductCartRow( props ){\n   return (\n      <li class=\"list-group-item d-flex justify-content-between align-items-center\">\n         <Link to={'/products/'+props.id}>\n            <img class=\"img-thumbnail\" src={props.image} alt={props.heading} width=\"64\" height=\"64\" />\n            <span class=\"mx-3\">{props.heading}</span>\n         </Link>\n\n         <span class=\"badge rounded-pill bg-warning text-dark float-end\">{props.num}</span>\n      </li>\n   )\n}\n\nexport default ProductCartRow","import React, { useEffect, useState } from \"react\"\nimport ProductCartRow from '../components/CartRow'\nimport { useStoreContext } from '../utils/GlobalStore'\n\nfunction Cart( props ){\n    const [{ products, cart }] = useStoreContext()\n    const [ cartProducts, setCartProducts ]= useState([])\n\n    // whenever page loads we generate the cart\n    useEffect( function(){\n        setCartProducts(\n            cart.map( cartItem=>{ return { ...cartItem, ...products.filter(product=>product._id===cartItem.id )[0] } })\n        )\n    }, [])\n   return (\n      <ul key={props.heading} class=\"list-group\">\n         {cartProducts.map( product=><ProductCartRow {...product} />)}\n      </ul>\n   )\n}\n\nexport default Cart","import React from 'react'\n\nfunction SettingsPage( props ){\n   return (\n      <>[SettingsPage]</>\n   )\n}\n\nexport default SettingsPage;","import React from 'react'\nimport { BrowserRouter, Route } from 'react-router-dom'\nimport { StoreProvider } from './utils/GlobalStore'\n\nimport NavBar from './components/NavBar'\nimport Footer from './components/Footer'\nimport AlertBar from './components/AlertBar'\n// pages\nimport Products from './pages/Products'\nimport ProductsInfo from './pages/ProductsInfo'\nimport ProductsAdd from './pages/ProductsAdd'\nimport Register from './pages/Register'\nimport Login from './pages/Login'\nimport Logout from './pages/Logout'\nimport Cart from './pages/Cart'\nimport Settings from './pages/Settings'\n\nfunction App() {\n   return (\n      <StoreProvider>\n         <BrowserRouter>\n            <div class=\"container\">\n               <AlertBar />\n               <NavBar />\n               <Route exact path={['/','/products']} component={Products} />\n               <Route exact path=\"/products/add\" component={ProductsAdd} />\n               <Route exact path=\"/products/info/:id\" component={ProductsInfo} />\n               <Route exact path=\"/cart\" component={Cart} />\n               <Route exact path=\"/settings\" component={Settings} />\n               <Route exact path=\"/register\" component={Register} />\n               <Route exact path=\"/login\" component={Login} />\n               <Route exact path=\"/logout\" component={Logout} />\n               <Footer />\n            </div>\n         </BrowserRouter>\n      </StoreProvider>\n   )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}